<!doctype html><html lang=zh dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://loonguser.github.io/categories/2.-%E7%B3%BB%E7%BB%9F/"><meta property="og:site_name" content="龙芯玩机指南"><meta property="og:title" content="2. 系统"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><title>2. 系统 | 龙芯玩机指南</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://loonguser.github.io/categories/2.-%E7%B3%BB%E7%BB%9F/><link rel=stylesheet href=/book.min.ddac3efe7ea4c1007ff53e5a8fd67f12517e5d2e99984d8c67a18668f7ecaa03.css integrity="sha256-3aw+/n6kwQB/9T5aj9Z/ElF+XS6ZmE2MZ6GGaPfsqgM=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh.search.min.03d02d3602d9c720722d657cf8e5b5510f7844ccec3e0149a7c94c612e403e81.js integrity="sha256-A9AtNgLZxyByLWV8+OW1UQ94RMzsPgFJp8lMYS5APoE=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=https://loonguser.github.io/categories/2.-%E7%B3%BB%E7%BB%9F/index.xml title=龙芯玩机指南></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>龙芯玩机指南</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Chinese</a></label><ul><li><a href=https://loonguser.github.io/en/>English</a></li><li><a href=https://loonguser.github.io/ru/>Russian</a></li></ul></li></ul><ul><li><a href=/firmware/>Firmware</a><ul><li><a href=/firmware/grub/>Grub编译与调试</a></li><li><a href=/firmware/pmon/>PMON的使用方法</a></li><li><a href=/firmware/uefi_boot_system/>从UEFI如何启动到系统</a></li><li><a href=/firmware/uefi/>龙芯UEFI使用详解</a></li><li><a href=/firmware/firmware/>如何更新固件</a></li></ul></li><li><span>Applications</span><ul><li><a href=/applications/gogs/>3A6000上搭建gogs</a></li><li><a href=/applications/blog/>3A6000上搭建hexo博客</a></li><li><a href=/applications/qemu/>Qemu使用</a></li><li><a href=/applications/ejtag/>龙芯lajtag常用技巧</a></li><li><a href=/applications/clash/>龙芯平台使用clash</a></li><li><a href=/applications/lat/>在龙芯3A5000上运行Windows程序</a></li></ul></li><li><span>Systems</span><ul><li><a href=/system/Loongnix_FAQ/>Loongnix_FAQ</a></li><li><a href=/system/build_openharmony_for_2k500/>龙芯2K500先锋派OpenHarmony构建指北</a></li><li><a href=/system/boot_param_with_kernel/>龙芯系统启动参数</a></li><li><a href=/system/kernel/>内核编译</a></li><li><a href=/system/update_system/>如何更新系统</a></li><li><a href=/system/gen_sys_file/>生成系统下的一些文件</a></li><li><a href=/system/systeminfo/>系统下查看一些信息</a></li><li><a href=/system/install_archlinux/>新世界Archlinux系统安装</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>2. 系统</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/1.-%E5%9B%BA%E4%BB%B6/>1. 固件</a>
<span>5</span></li><li class="flex justify-between"><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a>
<span>8</span></li><li class="flex justify-between"><a href=/categories/3.-%E5%BA%94%E7%94%A8/>3. 应用</a>
<span>6</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul></ul></li></ul></nav></aside></header><article class="markdown book-post"><h2><a href=/system/Loongnix_FAQ/>Loongnix_FAQ</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><blockquote><p>文章来源: <code>http://docs.loongnix.cn/loongnix/faq/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%A1%8C%E9%9D%A2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html</code></p></blockquote><blockquote><p>自2022/11/16日起桌面版软件源的key到期，如本地遇到key的问题，可依照下列方法对Key授权进行升级即可：</p><p>wget
<a href=http://pkg.loongnix.cn/loongnix/pool/main/d/debian-archive-keyring//debian-archive-keyring_2019.1.lnd.2_all.deb>http://pkg.loongnix.cn/loongnix/pool/main/d/debian-archive-keyring//debian-archive-keyring_2019.1.lnd.2_all.deb</a></p><p>dpkg -i debian-archive-keyring_2019.1.lnd.2_all.deb</p><p>apt-key add /usr/share/keyrings/debian-archive-buster-loongarch64-stable.gpg</p></blockquote><h2 id=1-loongnix桌面系统源>1. loongnix桌面系统源
<a class=anchor href=#1-loongnix%e6%a1%8c%e9%9d%a2%e7%b3%bb%e7%bb%9f%e6%ba%90>#</a></h2><pre tabindex=0><code class=language-auto data-lang=auto>http://pkg.loongnix.cn/loongnix/
</code></pre><h2 id=2-开启sshd服务>2. 开启sshd服务
<a class=anchor href=#2-%e5%bc%80%e5%90%afsshd%e6%9c%8d%e5%8a%a1>#</a></h2><p>Loongnixi桌面系统默认关闭sshd服务，开启方法:</p><pre tabindex=0><code class=language-auto data-lang=auto>loongson@loongson-pc:~$ sudo apt install openssh-server
loongson@loongson-pc:~$ systemctl start ssh
loongson@loongson-pc:~$ systemctl status ssh
</code></pre><h2 id=3-安装auditd软件包>3. 安装auditd软件包
<a class=anchor href=#3-%e5%ae%89%e8%a3%85auditd%e8%bd%af%e4%bb%b6%e5%8c%85>#</a></h2><p>Loongnix系统默认不集成auditd软件包，若使用过程中用到审计功能，需手动安装auditd软件包:</p><pre tabindex=0><code class=language-auto data-lang=auto>loongson@loongson-pc:~$ sudo apt install auditd &amp;&amp; systemctl start auditd &amp;&amp; systemctl status auditd
</code></pre><h2 id=4-制作rootfs文件系统>4. 制作rootfs文件系统
<a class=anchor href=#4-%e5%88%b6%e4%bd%9crootfs%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f>#</a></h2><p>已安装debootstrap的前提下，使用以下方法制作rootfs文件系统：</p><pre tabindex=0><code class=language-auto data-lang=auto>debootstrap --no-check-gpg --variant=minbase --components=main,non-free,contrib --arch=loongarch64 --foreign DaoXiangHu-stable iso http://pkg.loongnix.cn/loongnix/
chroot iso debootstrap/debootstrap --second-stage
cd iso
chroot .
</code></pre><p>执行debootstrap操作时，如果遇到下述错误现象：</p><a href=/system/Loongnix_FAQ/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/build_openharmony_for_2k500/>龙芯2K500先锋派OpenHarmony构建指北</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><blockquote><p>文章来源: <code>https://bbs.loongarch.org/d/435-2k500openharmony</code></p></blockquote><h3 id=一系统需求和环境配置>一、系统需求和环境配置
<a class=anchor href=#%e4%b8%80%e7%b3%bb%e7%bb%9f%e9%9c%80%e6%b1%82%e5%92%8c%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae>#</a></h3><p>官方推荐系统是ubuntu 20.4，预留60G到80G的磁盘空间，交换分区推荐8G以上，主要环境是python3.9。
也可以使用Debian构建，留意python版本，python3.10及更新版本要改一行代码，才能正常运行hb构建工具。</p><p>需要安装的软件包：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#f92672>sudo</span> <span style=color:#f92672>apt</span> <span style=color:#f92672>update</span>
</span></span><span style=display:flex><span><span style=color:#f92672>sudo</span> <span style=color:#f92672>apt</span> <span style=color:#f92672>upgrade</span>
</span></span><span style=display:flex><span><span style=color:#f92672>sudo</span> <span style=color:#f92672>apt</span> <span style=color:#f92672>install</span>   <span style=color:#f92672>apt-utils</span> <span style=color:#f92672>binutils</span> <span style=color:#f92672>bison</span> <span style=color:#f92672>flex</span> <span style=color:#f92672>bc</span> <span style=color:#f92672>build-essential</span> <span style=color:#f92672>make</span> <span style=color:#f92672>mtd-utils</span> <span style=color:#f92672>gcc-arm-linux-gnueabi</span> <span style=color:#f92672>u-boot-tools</span> <span style=color:#f92672>python3</span><span style=color:#a6e22e>.9</span> <span style=color:#f92672>python3-pip</span> <span style=color:#f92672>git</span> <span style=color:#f92672>zip</span> <span style=color:#f92672>unzip</span> <span style=color:#f92672>curl</span> <span style=color:#f92672>wget</span> <span style=color:#f92672>gcc</span> <span style=color:#f92672>g</span><span style=color:#f92672>++</span> <span style=color:#f92672>ruby</span> <span style=color:#f92672>dosfstools</span> <span style=color:#f92672>mtools</span> <span style=color:#f92672>default-jre</span> <span style=color:#f92672>default-jdk</span> <span style=color:#f92672>scons</span> <span style=color:#f92672>python3-distutils</span> <span style=color:#f92672>perl</span> <span style=color:#f92672>openssl</span> <span style=color:#f92672>libssl-dev</span> <span style=color:#f92672>cpio</span> <span style=color:#f92672>git-lfs</span> <span style=color:#f92672>m4</span> <span style=color:#f92672>ccache</span> <span style=color:#f92672>zlib1g-dev</span> <span style=color:#f92672>tar</span> <span style=color:#f92672>rsync</span> <span style=color:#f92672>liblz4-tool</span> <span style=color:#f92672>genext2fs</span> <span style=color:#f92672>binutils-dev</span> <span style=color:#f92672>device-tree-compiler</span> <span style=color:#f92672>e2fsprogs</span> <span style=color:#f92672>git-core</span> <span style=color:#f92672>gnupg</span> <span style=color:#f92672>gnutls-bin</span> <span style=color:#f92672>gperf</span> <span style=color:#f92672>lib32ncurses5-dev</span> <span style=color:#f92672>libffi-dev</span> <span style=color:#f92672>zlib</span><span style=color:#f92672>*</span> <span style=color:#f92672>libelf-dev</span> <span style=color:#f92672>libx11-dev</span> <span style=color:#f92672>libgl1-mesa-dev</span> <span style=color:#f92672>lib32z1-dev</span> <span style=color:#f92672>xsltproc</span> <span style=color:#f92672>x11proto-core-dev</span> <span style=color:#f92672>libc6-dev-i386</span> <span style=color:#f92672>libxml2-dev</span> <span style=color:#f92672>lib32z-dev</span> <span style=color:#f92672>libdwarf-dev</span> <span style=color:#f92672>grsync</span> <span style=color:#f92672>xxd</span> <span style=color:#f92672>libglib2</span><span style=color:#a6e22e>.0-dev</span> <span style=color:#f92672>libpixman-1-dev</span> <span style=color:#f92672>kmod</span> <span style=color:#f92672>jfsutils</span> <span style=color:#f92672>reiserfsprogs</span> <span style=color:#f92672>xfsprogs</span> <span style=color:#f92672>squashfs-tools</span>  <span style=color:#f92672>pcmciautils</span> <span style=color:#f92672>quota</span> <span style=color:#f92672>ppp</span> <span style=color:#f92672>libtinfo-dev</span> <span style=color:#f92672>libtinfo5</span> <span style=color:#f92672>libncurses5</span> <span style=color:#f92672>libncurses5-dev</span> <span style=color:#f92672>libncursesw5</span> <span style=color:#f92672>libstdc</span><span style=color:#f92672>++</span><span style=color:#f92672>6</span>  <span style=color:#f92672>gcc-arm-none-eabi</span> <span style=color:#f92672>vim</span> <span style=color:#f92672>ssh</span> <span style=color:#f92672>locales</span> <span style=color:#f92672>doxygen</span> <span style=color:#f92672>libxinerama-dev</span> <span style=color:#f92672>libxcursor-dev</span> <span style=color:#f92672>libxrandr-dev</span> <span style=color:#f92672>libxi-dev</span> <span style=color:#f92672>npm</span> <span style=color:#f92672>libfl-dev</span>
</span></span></code></pre></div><h3 id=二注册gitee账号和代码下载前的准备>二、注册gitee账号和代码下载前的准备
<a class=anchor href=#%e4%ba%8c%e6%b3%a8%e5%86%8cgitee%e8%b4%a6%e5%8f%b7%e5%92%8c%e4%bb%a3%e7%a0%81%e4%b8%8b%e8%bd%bd%e5%89%8d%e7%9a%84%e5%87%86%e5%a4%87>#</a></h3><p>源码下载推荐使用gitee的repo工具，从OpenHarmony gitee仓库下载代码，也可以使用OpenHarmony全量代码包。
参见资源链接1。使用repo工具需要gitee账号，并上传ssh公钥到账号的"ssh配置”里面，并且需要对git进行全局配置。大致过程如下：</p><p>1、使用电子邮箱注册gitee账号，如
<a href=mailto:abc@163.com>abc@163.com</a>
2、使用如下命令建立公钥
<code>ssh-keygen -t ed25519 -C "Gitee SSH Key"</code>
3、获取公钥内容并复制到gitee的ssh配置里面
<code>cat ~/.ssh/id_ed25519.pub</code>
4、获取gitee repo工具并赋予可执行权限
<code>sudo curl -s https://gitee.com/oschina/repo/raw/fork_flow/repo-py3 > /usr/local/bin/repo</code>
<code>sudo chmod a+x /usr/local/bin/repo</code>
<code>pip3 install -i https://repo.huaweicloud.com/repository/pypi/simple requests</code>
5、对git进行全局配置，配置账号和选项并进行测试
<code>// 配置git，以abc@163.com为例，实际配置以注册账号为准 git config --global user.name "abc" git config --global user.email "abc@163.com" git config --global credential.helper store</code>
<code>// 测试 ssh -T git@gitee.com</code></p><a href=/system/build_openharmony_for_2k500/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/boot_param_with_kernel/>龙芯系统启动参数</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><h2 id=龙芯平台常用启动参数>龙芯平台常用启动参数
<a class=anchor href=#%e9%be%99%e8%8a%af%e5%b9%b3%e5%8f%b0%e5%b8%b8%e7%94%a8%e5%90%af%e5%8a%a8%e5%8f%82%e6%95%b0>#</a></h2><h3 id=增加串口>增加串口
<a class=anchor href=#%e5%a2%9e%e5%8a%a0%e4%b8%b2%e5%8f%a3>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>console<span style=color:#f92672>=</span>ttyS0,115200 earlycon<span style=color:#f92672>=</span>uart,mmio,0x1fe001e0
</span></span></code></pre></div><p>注意:</p><ul><li><code>console</code>即是指控制台输出, <code>ttyS0</code>是龙芯默认的串口终端, 波特率是<code>115200</code>.</li><li><code>earlycon</code>是用来打印早期<code>acpi</code>初始化过程的参数, 在使用<code>dts</code>传参时可能不可用.</li></ul><h3 id=核数限制>核数限制
<a class=anchor href=#%e6%a0%b8%e6%95%b0%e9%99%90%e5%88%b6>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nr_cpus<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> maxcpus<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h3 id=多核调度限制>多核调度限制
<a class=anchor href=#%e5%a4%9a%e6%a0%b8%e8%b0%83%e5%ba%a6%e9%99%90%e5%88%b6>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>isolcpus<span style=color:#f92672>=</span>0-1,3-5
</span></span></code></pre></div><p>示例可以使<code>0,1,3,4,5</code>核不参与调度, 即被孤立.</p><h3 id=禁用smp>禁用SMP
<a class=anchor href=#%e7%a6%81%e7%94%a8smp>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nosmp
</span></span></code></pre></div><h3 id=串口调试休眠>串口调试休眠
<a class=anchor href=#%e4%b8%b2%e5%8f%a3%e8%b0%83%e8%af%95%e4%bc%91%e7%9c%a0>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>no_console_suspend
</span></span></code></pre></div><p>在<code>s3</code>和<code>s4</code>的过程中, 串口将打印执行流程.</p><h3 id=设置替代初始化进程>设置替代初始化进程
<a class=anchor href=#%e8%ae%be%e7%bd%ae%e6%9b%bf%e4%bb%a3%e5%88%9d%e5%a7%8b%e5%8c%96%e8%bf%9b%e7%a8%8b>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rdinit<span style=color:#f92672>=</span>/sbin/my_init
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>init<span style=color:#f92672>=</span>/sbin/my_init
</span></span></code></pre></div><h3 id=减少内核启动时的输出>减少内核启动时的输出
<a class=anchor href=#%e5%87%8f%e5%b0%91%e5%86%85%e6%a0%b8%e5%90%af%e5%8a%a8%e6%97%b6%e7%9a%84%e8%be%93%e5%87%ba>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>quiet
</span></span></code></pre></div><h3 id=设置日志级别>设置日志级别
<a class=anchor href=#%e8%ae%be%e7%bd%ae%e6%97%a5%e5%bf%97%e7%ba%a7%e5%88%ab>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>loglevel<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h3 id=设置根文件系统所在设备>设置根文件系统所在设备
<a class=anchor href=#%e8%ae%be%e7%bd%ae%e6%a0%b9%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e6%89%80%e5%9c%a8%e8%ae%be%e5%a4%87>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>root<span style=color:#f92672>=</span>/dev/sda3
</span></span></code></pre></div><h3 id=加载ramdisk>加载ramdisk
<a class=anchor href=#%e5%8a%a0%e8%bd%bdramdisk>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>initrd<span style=color:#f92672>=</span>/path/to/initrd.img
</span></span></code></pre></div><h3 id=设置pci属性>设置PCI属性
<a class=anchor href=#%e8%ae%be%e7%bd%aepci%e5%b1%9e%e6%80%a7>#</a></h3><p>如禁用<code>msi</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pci<span style=color:#f92672>=</span>nomsi
</span></span></code></pre></div><h3 id=设置挂载参数>设置挂载参数
<a class=anchor href=#%e8%ae%be%e7%bd%ae%e6%8c%82%e8%bd%bd%e5%8f%82%e6%95%b0>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount_param<span style=color:#f92672>=</span>noatime
</span></span></code></pre></div><h3 id=设置selinux启用>设置SELinux启用
<a class=anchor href=#%e8%ae%be%e7%bd%aeselinux%e5%90%af%e7%94%a8>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>selinux<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div><h3 id=禁用gpu驱动>禁用gpu驱动
<a class=anchor href=#%e7%a6%81%e7%94%a8gpu%e9%a9%b1%e5%8a%a8>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gsgpu.LG100_support<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h3 id=使能lsdc驱动>使能lsdc驱动
<a class=anchor href=#%e4%bd%bf%e8%83%bdlsdc%e9%a9%b1%e5%8a%a8>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lsdc.modeset<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div><h2 id=内核参数查询>内核参数查询
<a class=anchor href=#%e5%86%85%e6%a0%b8%e5%8f%82%e6%95%b0%e6%9f%a5%e8%af%a2>#</a></h2><p>龙芯系统支持的内核启动参数可以使用如下命令查看:</p><a href=/system/boot_param_with_kernel/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/kernel/>内核编译</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><h1 id=龙芯内核编译>龙芯内核编译
<a class=anchor href=#%e9%be%99%e8%8a%af%e5%86%85%e6%a0%b8%e7%bc%96%e8%af%91>#</a></h1><p>目前<strong>龙芯</strong>已经由MIPS架构转战<strong>LoongArch</strong>架构.</p><ul><li><strong>vmlinux+vmlinuz</strong></li><li><strong>libmodules</strong></li><li><strong>RamDisk_initrd</strong></li></ul><h2 id=准备阶段>准备阶段
<a class=anchor href=#%e5%87%86%e5%a4%87%e9%98%b6%e6%ae%b5>#</a></h2><blockquote><p>下面以LoongArch架构的编译为例.
<strong>编译器采用Gcc交叉编译LoongArch版本</strong></p></blockquote><ul><li>编译器版本 :
loongarch64-linux-gnu-gcc-8.3.0</li><li>配置文件 采用龙芯默认配置:
cp arch/loongarch/configs/loongson3_defconfig .config</li></ul><h2 id=开始编译>开始编译
<a class=anchor href=#%e5%bc%80%e5%a7%8b%e7%bc%96%e8%af%91>#</a></h2><blockquote><p>vmlinux/vmlinuz</p></blockquote><ul><li>执行 make ARCH=loongarch CROSS_COMPILE=/opt/LoongArch_Toolchains/loongarch64-linux-gnu-2020-11-06/bin/loongarch64-linux-gnu-(此为编译器路径 which gcc) menuconfig
<img src=/images/kernel/1.png alt=在这里插入图片描述></li></ul><p><strong>进入图形化配置界面,开关相关功能,我们直接Esc退出.</strong></p><ul><li><p>执行 make ARCH=loongarch CROSS_COMPILE=/opt/LoongArch_Toolchains/loongarch64-linux-gnu-2020-11-06/bin/loongarch64-linux-gnu- -j 16 //采用16线程进行编译(目前我是在服务器上编译,核数较多). 到此<strong>vmlinux/vmlinuz 非压缩和压缩版内核</strong>就编译完成.
<img src=/images/kernel/2.png alt=在这里插入图片描述>
<strong>System.map</strong> 是符号表</p></li><li><p>执行 make modules_install INSTALL_MOD_PATH=./ ARCH=loongarch CROSS_COMPILE=/opt/LoongArch_Toolchains/loongarch64-linux-gnu-2020-11-06/bin/loongarch64-linux-gnu- 编译lib/modules/ 驱动模块包,熟悉内核的人都了解,当配置menuconfig的时候,会将M的驱动以modules的形式在内核中加载.
<img src=/images/kernel/3.png alt=在这里插入图片描述></p></li></ul><h2 id=将编译的文件进行使用>将编译的文件进行使用
<a class=anchor href=#%e5%b0%86%e7%bc%96%e8%af%91%e7%9a%84%e6%96%87%e4%bb%b6%e8%bf%9b%e8%a1%8c%e4%bd%bf%e7%94%a8>#</a></h2><blockquote><p><strong>1.vmlinuz 放在os的/boot/下,并可以修改成自己喜欢的名字 vmlinuz_go</strong></p></blockquote><blockquote><p><strong>2.将lib/modules/下的文件copy到os根目录/lib/modules/</strong></p></blockquote><blockquote><p><strong>3.参考Deebian制作Ramdisk为例: 执行</strong>
<img src=/images/kernel/4.png alt=在这里插入图片描述>
使用draut进行制作,该脚本制作的Ramdisk支持了好几种文件系统,你可以简单制作RamDisk,这里就不详细介绍该命令了.将制作的*.img文件拷贝到/boot下.</p></blockquote><p>dracut 是一个事件驱动的 initramfs 基础设施。dracut(工具)被用来通过拷贝工具和文件，从一个已经安装的系统创建一个 initramfs 镜像，并将镜像与dracut框架结合在一起。</p><a href=/system/kernel/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/update_system/>如何更新系统</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><h2 id=1-全系统更新>1 全系统更新:
<a class=anchor href=#1-%e5%85%a8%e7%b3%bb%e7%bb%9f%e6%9b%b4%e6%96%b0>#</a></h2><p><code>Debian</code>系:</p><pre tabindex=0><code>apt update &amp;&amp; apt upgrade
</code></pre><p><code>Redhat</code>系:</p><pre tabindex=0><code>yum update
</code></pre><p><code>Arch</code>系:</p><pre tabindex=0><code>pacman -Syu
</code></pre><p>安同 OS (AOSC OS)：</p><pre tabindex=0><code>oma upgrade
</code></pre><h2 id=2-单独更新内核>2. 单独更新内核
<a class=anchor href=#2-%e5%8d%95%e7%8b%ac%e6%9b%b4%e6%96%b0%e5%86%85%e6%a0%b8>#</a></h2><h3 id=21-更新自己编译的内核>2.1 更新自己编译的内核
<a class=anchor href=#21-%e6%9b%b4%e6%96%b0%e8%87%aa%e5%b7%b1%e7%bc%96%e8%af%91%e7%9a%84%e5%86%85%e6%a0%b8>#</a></h3><p>将内核放置<code>/boot</code>下即可(通常<code>/boot</code>是<code>grub.cfg</code>默认指定的根目录)</p><p>更新完记得更新<code>grub.cfg</code>, 见第四节.</p><h3 id=22-更新软件源上的内核>2.2 更新软件源上的内核
<a class=anchor href=#22-%e6%9b%b4%e6%96%b0%e8%bd%af%e4%bb%b6%e6%ba%90%e4%b8%8a%e7%9a%84%e5%86%85%e6%a0%b8>#</a></h3><p>以<code>Debian</code>系为例, 其余不做演示:</p><pre tabindex=0><code>root@loongson-pc:/home/loongson# apt-cache search linux-header
aufs-dkms - DKMS files to build and install aufs
linux-headers-4.19.0-17-common - Common header files for Linux 4.19
linux-headers-4.19.0-17-loongson-3 - Linux kernel headers for 4.19 on loongson-3
linux-headers-4.19.0-18-common - Common header files for Linux 4.19
linux-headers-4.19.0-18-loongson-3 - Linux kernel headers for 4.19 on loongson-3
linux-headers-4.19.0-19-common - Common header files for Linux 4.19
linux-headers-4.19.0-19-loongson-3 - Linux kernel headers for 4.19 on loongson-3
linux-headers-loongson-3 - Linux kernel headers for 4.19 on loongson-3 (meta-package)
root@loongson-pc:/home/loongson#
root@loongson-pc:/home/loongson# apt install linux-headers-4.19.0-19-loongson-3
正在读取软件包列表... 完成正在分析软件包的依赖关系树       
正在读取状态信息... 完成       
......
......
</code></pre><h2 id=3-单独更新initrd>3. 单独更新initrd
<a class=anchor href=#3-%e5%8d%95%e7%8b%ac%e6%9b%b4%e6%96%b0initrd>#</a></h2><h3 id=31-更新自己编译的modules并生成initrd>3.1 更新自己编译的modules并生成initrd
<a class=anchor href=#31-%e6%9b%b4%e6%96%b0%e8%87%aa%e5%b7%b1%e7%bc%96%e8%af%91%e7%9a%84modules%e5%b9%b6%e7%94%9f%e6%88%90initrd>#</a></h3><p>将从内核源码编译的模块文件拷贝至<code>/lib/modules/</code>, 比如<code>4.19.190+.tgz</code>是模块文件的压缩包:</p><a href=/system/update_system/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/gen_sys_file/>生成系统下的一些文件</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><h2 id=1-initrd>1. Initrd
<a class=anchor href=#1-initrd>#</a></h2><p>通常, <code>lib/modules/</code>下的文件夹名称和内核的版本名是一致的, 所以可以通过下列命令生成<code>Initrd</code>:</p><h3 id=11-dracut命令>1.1 dracut命令
<a class=anchor href=#11-dracut%e5%91%bd%e4%bb%a4>#</a></h3><pre tabindex=0><code>ls lib/modules/* | xargs -I N dracut --kver N --force
</code></pre><h3 id=12-mkinitramfs命令>1.2 mkinitramfs命令
<a class=anchor href=#12-mkinitramfs%e5%91%bd%e4%bb%a4>#</a></h3><pre tabindex=0><code>ls lib/modules/* | xargs -I N mkinitramfs /lib/modules/N -o /boot/initrd.img-N 
</code></pre><h2 id=2-grub>2. GRUB
<a class=anchor href=#2-grub>#</a></h2><h3 id=21-grub>2.1 Grub
<a class=anchor href=#21-grub>#</a></h3><p>通常, <code>Grub</code>安装在当前启动系统所在的磁盘上, 如下命令可以找到当前磁盘. (希望将<code>Grub</code>安装在其他盘的同学, 看明白自己想要的效果)</p><pre tabindex=0><code>[root@mxd ~]# lsblk -P | grep &#34;$(lsblk -P | grep -w &#39;MOUNTPOINTS=&#34;/&#34;&#39; | sed &#39;s/.*MAJ:MIN=&#34;\([^:]*\).*/\1/g&#39;):0&#34; | awk -F &#39;&#34;&#39; &#39;{print &#34;/dev/&#34; $2}&#39;
/dev/nvme0n1
</code></pre><p>再通过<code>grub-install</code>或者<code>grub2-install</code>命令安装进磁盘:</p><pre tabindex=0><code>grub-install /dev/nvme0n1
</code></pre><h3 id=22-grubcfg>2.2 grub.cfg
<a class=anchor href=#22-grubcfg>#</a></h3><pre tabindex=0><code>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre><h3 id=23-grubefi>2.3 grub.efi
<a class=anchor href=#23-grubefi>#</a></h3><pre tabindex=0><code>grub-mkimage -c /boot/grub/grub.cfg -o /boot/efi/EFI/BOOT/BOOTLOONGARCH64.EFI -O loongarch64-efi
</code></pre><p><code>2.1</code>节中生成<code>grub</code>可以让<code>bios</code>找到启动设备, 自动启动.</p><a href=/system/gen_sys_file/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/systeminfo/>系统下查看一些信息</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><h2 id=1-查看系统版本>1. 查看系统版本
<a class=anchor href=#1-%e6%9f%a5%e7%9c%8b%e7%b3%bb%e7%bb%9f%e7%89%88%e6%9c%ac>#</a></h2><pre tabindex=0><code>[root@mxd mxd]# cat /etc/os-release
NAME=&#34;Arch Linux&#34;
PRETTY_NAME=&#34;Arch Linux&#34;
ID=arch
BUILD_ID=rolling
ANSI_COLOR=&#34;38;2;23;147;209&#34;
HOME_URL=&#34;https://archlinux.org/&#34;
DOCUMENTATION_URL=&#34;https://wiki.archlinux.org/&#34;
SUPPORT_URL=&#34;https://bbs.archlinux.org/&#34;
BUG_REPORT_URL=&#34;https://bugs.archlinux.org/&#34;
PRIVACY_POLICY_URL=&#34;https://terms.archlinux.org/docs/privacy-policy/&#34;
LOGO=archlinux-logo
</code></pre><h2 id=2-查看内核版本>2. 查看内核版本
<a class=anchor href=#2-%e6%9f%a5%e7%9c%8b%e5%86%85%e6%a0%b8%e7%89%88%e6%9c%ac>#</a></h2><pre tabindex=0><code>[root@mxd mxd]# uname -a
Linux mxd 6.5.0-4 #1 SMP PREEMPT Thu, 31 Aug 2023 09:38:08 +0000 loongarch64 GNU/Linux
</code></pre><h2 id=3-查看固件版本>3. 查看固件版本
<a class=anchor href=#3-%e6%9f%a5%e7%9c%8b%e5%9b%ba%e4%bb%b6%e7%89%88%e6%9c%ac>#</a></h2><pre tabindex=0><code>[root@mxd mxd]# cat /sys/firmware/loongson/boardinfo
BIOS Information
Vendor			: Loongson
Version			: Loongson-UDK2018-V4.0.05494-stable202305
ROM Size		: 4096 KB
Release Date		: 07/10/23 18:05:47

Board Information
Manufacturer		: Loongson
Board Name		: Loongson-LS3A6000-7A2000-1w-EVB-V1.21
Family			: LOONGSON64
</code></pre><h2 id=4-查看ip>4. 查看ip
<a class=anchor href=#4-%e6%9f%a5%e7%9c%8bip>#</a></h2><pre tabindex=0><code>[root@mxd mxd]# ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute 
       valid_lft forever preferred_lft forever
2: enp0s3f0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN group default qlen 1000
    link/ether 00:55:7b:b5:7d:f7 brd ff:ff:ff:ff:ff:ff
3: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether ce:38:b3:df:3b:23 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.13/23 brd 192.168.1.255 scope global dynamic noprefixroute enp2s0
       valid_lft 40218sec preferred_lft 40218sec
    inet6 fe80::80b6:e9f0:ab6c:e9c5/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:4e:12:01:c7 brd ff:ff:ff:ff:ff:ff
    inet 172.18.0.1/16 brd 172.18.255.255 scope global docker0
       valid_lft forever preferred_lft forever
</code></pre><h2 id=5-查看pci设备>5. 查看pci设备
<a class=anchor href=#5-%e6%9f%a5%e7%9c%8bpci%e8%ae%be%e5%a4%87>#</a></h2><pre tabindex=0><code>[root@mxd mxd]# lspci 
00:00.0 Host bridge: Loongson Technology LLC Hyper Transport Bridge Controller
00:00.1 Host bridge: Loongson Technology LLC Hyper Transport Bridge Controller (rev 01)
00:00.2 Host bridge: Loongson Technology LLC Device 7a20 (rev 01)
00:00.3 Host bridge: Loongson Technology LLC Device 7a30
00:03.0 Ethernet controller: Loongson Technology LLC Device 7a13
00:04.0 USB controller: Loongson Technology LLC OHCI USB Controller (rev 02)
00:04.1 USB controller: Loongson Technology LLC EHCI USB Controller (rev 02)
00:05.0 USB controller: Loongson Technology LLC OHCI USB Controller (rev 02)
00:05.1 USB controller: Loongson Technology LLC EHCI USB Controller (rev 02)
00:06.0 Multimedia video controller: Loongson Technology LLC Device 7a25 (rev 01)
00:06.1 VGA compatible controller: Loongson Technology LLC Device 7a36 (rev 02)
00:06.2 Audio device: Loongson Technology LLC Device 7a37
00:07.0 Audio device: Loongson Technology LLC HDA (High Definition Audio) Controller
00:08.0 SATA controller: Loongson Technology LLC Device 7a18
00:09.0 PCI bridge: Loongson Technology LLC Device 7a49
00:0a.0 PCI bridge: Loongson Technology LLC Device 7a39
00:0b.0 PCI bridge: Loongson Technology LLC Device 7a39
00:0c.0 PCI bridge: Loongson Technology LLC Device 7a39
00:0d.0 PCI bridge: Loongson Technology LLC Device 7a49
00:0f.0 PCI bridge: Loongson Technology LLC Device 7a69
00:10.0 PCI bridge: Loongson Technology LLC Device 7a59
00:13.0 PCI bridge: Loongson Technology LLC Device 7a59
00:16.0 System peripheral: Loongson Technology LLC Device 7a1b
00:19.0 USB controller: Loongson Technology LLC Device 7a34
02:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 15)
05:00.0 Non-Volatile memory controller: Shenzhen Longsys Electronics Co., Ltd. SM2263EN/SM2263XT-based OEM SSD (rev 03)
07:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Oland [Radeon HD 8570 / R5 430 OEM / R7 240/340 / Radeon 520 OEM] (rev 87)
07:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Oland/Hainan/Cape Verde/Pitcairn HDMI Audio [Radeon HD 7000 Series]
</code></pre><h3 id=51-详细查看某pci设备使用的驱动>5.1 详细查看某pci设备使用的驱动
<a class=anchor href=#51-%e8%af%a6%e7%bb%86%e6%9f%a5%e7%9c%8b%e6%9f%90pci%e8%ae%be%e5%a4%87%e4%bd%bf%e7%94%a8%e7%9a%84%e9%a9%b1%e5%8a%a8>#</a></h3><p>其中<code>07:00.0</code>是上面左侧显示的一段数字, 根据描述, <code>07:00.0</code>那一行指一个<code>VGA兼容设备</code>, 换句话说是指显示设备, 业内叫做<code>显卡</code></p><a href=/system/systeminfo/>...</a></p></article><article class="markdown book-post"><h2><a href=/system/install_archlinux/>新世界Archlinux系统安装</a></h2><div class=text-small><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a></div><p><blockquote><p>转载文章来源：
<a href=https://bbs.loongarch.org/d/88-archlinux/28>https://bbs.loongarch.org/d/88-archlinux/28</a></p></blockquote><h4 id=本主题多人协作版主权限可编辑开源爱好者若要参与协作可回复中申请权限或者在qq群里申请>本主题多人协作，版主权限可编辑，开源爱好者若要参与协作，可回复中申请权限，或者在QQ群里申请。
<a class=anchor href=#%e6%9c%ac%e4%b8%bb%e9%a2%98%e5%a4%9a%e4%ba%ba%e5%8d%8f%e4%bd%9c%e7%89%88%e4%b8%bb%e6%9d%83%e9%99%90%e5%8f%af%e7%bc%96%e8%be%91%e5%bc%80%e6%ba%90%e7%88%b1%e5%a5%bd%e8%80%85%e8%8b%a5%e8%a6%81%e5%8f%82%e4%b8%8e%e5%8d%8f%e4%bd%9c%e5%8f%af%e5%9b%9e%e5%a4%8d%e4%b8%ad%e7%94%b3%e8%af%b7%e6%9d%83%e9%99%90%e6%88%96%e8%80%85%e5%9c%a8qq%e7%be%a4%e9%87%8c%e7%94%b3%e8%af%b7>#</a></h4><h4 id=为了协调一致本指南基于yetisthttpsbbsloongarchorgu79制作的可引导安装镜像指南覆盖系统引导安装和具体应用配置安装配置中遇到的问题可以在回复中提出本主题多人协作持续更新勿催谢谢>为了协调一致，本指南基于
<a href=https://bbs.loongarch.org/u/79>@yetist</a>制作的可引导安装镜像，指南覆盖系统引导、安装和具体应用配置。安装配置中遇到的问题，可以在回复中提出。本主题多人协作持续更新，勿催，谢谢！
<a class=anchor href=#%e4%b8%ba%e4%ba%86%e5%8d%8f%e8%b0%83%e4%b8%80%e8%87%b4%e6%9c%ac%e6%8c%87%e5%8d%97%e5%9f%ba%e4%ba%8eyetisthttpsbbsloongarchorgu79%e5%88%b6%e4%bd%9c%e7%9a%84%e5%8f%af%e5%bc%95%e5%af%bc%e5%ae%89%e8%a3%85%e9%95%9c%e5%83%8f%e6%8c%87%e5%8d%97%e8%a6%86%e7%9b%96%e7%b3%bb%e7%bb%9f%e5%bc%95%e5%af%bc%e5%ae%89%e8%a3%85%e5%92%8c%e5%85%b7%e4%bd%93%e5%ba%94%e7%94%a8%e9%85%8d%e7%bd%ae%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%ae%e4%b8%ad%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98%e5%8f%af%e4%bb%a5%e5%9c%a8%e5%9b%9e%e5%a4%8d%e4%b8%ad%e6%8f%90%e5%87%ba%e6%9c%ac%e4%b8%bb%e9%a2%98%e5%a4%9a%e4%ba%ba%e5%8d%8f%e4%bd%9c%e6%8c%81%e7%bb%ad%e6%9b%b4%e6%96%b0%e5%8b%bf%e5%82%ac%e8%b0%a2%e8%b0%a2>#</a></h4><h2 id=一龙芯新固件环境下引导盘的制作>一、龙芯新固件环境下引导盘的制作
<a class=anchor href=#%e4%b8%80%e9%be%99%e8%8a%af%e6%96%b0%e5%9b%ba%e4%bb%b6%e7%8e%af%e5%a2%83%e4%b8%8b%e5%bc%95%e5%af%bc%e7%9b%98%e7%9a%84%e5%88%b6%e4%bd%9c>#</a></h2><h3 id=安装镜像及软件仓库动态可在如下主题中找到>安装镜像及软件仓库动态，可在如下主题中找到
<a class=anchor href=#%e5%ae%89%e8%a3%85%e9%95%9c%e5%83%8f%e5%8f%8a%e8%bd%af%e4%bb%b6%e4%bb%93%e5%ba%93%e5%8a%a8%e6%80%81%e5%8f%af%e5%9c%a8%e5%a6%82%e4%b8%8b%e4%b8%bb%e9%a2%98%e4%b8%ad%e6%89%be%e5%88%b0>#</a></h3><p><a href=https://bbs.loongarch.org/d/67-loongarchlinux-202203/30>https://bbs.loongarch.org/d/67-loongarchlinux-202203/30</a></p><h3 id=最新镜像下载随时更新>最新镜像下载，随时更新
<a class=anchor href=#%e6%9c%80%e6%96%b0%e9%95%9c%e5%83%8f%e4%b8%8b%e8%bd%bd%e9%9a%8f%e6%97%b6%e6%9b%b4%e6%96%b0>#</a></h3><p><a href=https://mirrors.wsyu.edu.cn/loongarch/2022.03/iso/2022.06/loongarchlinux-2022.06.16.1-loongarch64.iso>https://mirrors.wsyu.edu.cn/loongarch/2022.03/iso/2022.06/loongarchlinux-2022.06.16.1-loongarch64.iso</a><br><a href=https://mirrors.wsyu.edu.cn/loongarch/2022.03/iso/2022.06/loongarchlinux-2022.06.22.1-loongarch64.iso>https://mirrors.wsyu.edu.cn/loongarch/2022.03/iso/2022.06/loongarchlinux-2022.06.22.1-loongarch64.iso</a></p><p><a href=https://mirrors.wsyu.edu.cn/loongarch/archlinux/iso/latest/archlinux-loong64.iso>https://mirrors.wsyu.edu.cn/loongarch/archlinux/iso/latest/archlinux-loong64.iso</a></p><h3 id=引导盘制作>引导盘制作
<a class=anchor href=#%e5%bc%95%e5%af%bc%e7%9b%98%e5%88%b6%e4%bd%9c>#</a></h3><p>准备工作：一块确定状态良好的U盘，容量4G以上即可，制作引导U盘会擦除盘内原始数据，注意备份。<br>Linux环境下，插入U盘，系统会识别，不要做任何打开，加载等操作，具体设备名，可使用如下命令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls -la /dev/sd*      <span style=color:#75715e>##  U盘一般会识别成硬盘设备，*表示系统动态赋予的一个字符，用以区分不同硬盘</span>
</span></span></code></pre></div><h4 id=linux环境下使用dd这个工具软件>Linux环境下，使用dd这个工具软件
<a class=anchor href=#linux%e7%8e%af%e5%a2%83%e4%b8%8b%e4%bd%bf%e7%94%a8dd%e8%bf%99%e4%b8%aa%e5%b7%a5%e5%85%b7%e8%bd%af%e4%bb%b6>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-perl data-lang=perl><span style=display:flex><span>注意<span style=color:#960050;background-color:#1e0010>：</span>x是个字符<span style=color:#960050;background-color:#1e0010>，</span>用实际内容替换<span style=color:#960050;background-color:#1e0010>，</span>命令执行需要root用户权限
</span></span><span style=display:flex><span>sudo dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>loongarchlinux<span style=color:#f92672>-</span>xxx<span style=color:#f92672>.</span>iso of<span style=color:#f92672>=</span><span style=color:#e6db74>/dev/s</span>dx  bs<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>M status<span style=color:#f92672>=</span>progress oflag<span style=color:#f92672>=</span>direct 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 命令执行完成后，建议运行下如下命令，确保U盘写入完整</span>
</span></span><span style=display:flex><span>sudo sync 
</span></span></code></pre></div><h2 id=二系统引导和安装前的检查>二、系统引导和安装前的检查
<a class=anchor href=#%e4%ba%8c%e7%b3%bb%e7%bb%9f%e5%bc%95%e5%af%bc%e5%92%8c%e5%ae%89%e8%a3%85%e5%89%8d%e7%9a%84%e6%a3%80%e6%9f%a5>#</a></h2><p>使用新固件引导，有两个快捷键会经常用到：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>F2 <span style=color:#75715e>----- 激活固件配置界面，可在配置界面的选择引导设备</span>
</span></span><span style=display:flex><span>F12 <span style=color:#75715e>----- 激活引导管理菜单，暂时不推荐使用这个方式选择引导设备</span>
</span></span></code></pre></div><p><img src=https://bbs.loongarch.org/assets/files/2022-06-18/1655528601-696633-boot.jpg alt></p><p><strong>使用新固件引导系统，包括引导本主题中制作好的U盘和之前使用grub有区别，具体流程是：</strong></p><p>1、开机前把<strong>制作好的U盘</strong>插入机器USB接口，建议插入到<strong>主板提供的接口</strong>上，不建议使用前置接口，躲坑。<br>2、开机后出现龙芯logo，<strong>快速按F2</strong>，直到进入<strong>固件配置界面</strong><br>3、按如下图示操作：<br>&mldr;<br>TODO: 需要补充英文界面操作，或说明修改语言方法。</p><p>移动光标到 <strong>启动管理</strong> 项，回车：<br><img src=https://bbs.loongarch.org/assets/files/2022-06-18/1655534559-721436-dbd7f34c6e4fa17c59420e5fe2852376.jpg alt></p><p>进入 <strong>启动管理</strong> 菜单之后，将会看到一系列可选择的启动项，请在列表中找到 <strong>EFI System Partition</strong> 或 <strong>EFI System Partition 2</strong>，并选择此项启动：<br><img src=https://bbs.loongarch.org/assets/files/2022-06-18/1655534991-6743-9d13303388461bb11beb2e2ae202d27b.jpg alt></p><a href=/system/install_archlinux/>...</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/1.-%E5%9B%BA%E4%BB%B6/>1. 固件</a>
<span>5</span></li><li class="flex justify-between"><a href=/categories/2.-%E7%B3%BB%E7%BB%9F/>2. 系统</a>
<span>8</span></li><li class="flex justify-between"><a href=/categories/3.-%E5%BA%94%E7%94%A8/>3. 应用</a>
<span>6</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul></ul></li></ul></nav></div></aside></main></body></html>